---
title:  "IP (Internet Protocol)" 

categories:
  - networkmodel
tags:
  - [networkmodel,OSI7,Layer3]

toc: true

date: 2022-07-26
last_modified_at: 2022-07-26
---

## ğŸ—‚ï¸IP (Internet Protocol)

- <span style="color:blue"><b>IP(Internet Protocol) </b></span>

  - OSI 7 Layerì—ì„œ 3ê³„ì¸µì— í•´ë‹¹í•˜ëŠ” í”„ë¡œí† ì½œ

  - Packetì„ ì§€ì •ëœ ëª©ì ì§€ ë„¤íŠ¸ì›Œí¬ê¹Œì§€ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹

  - <span style="color:red"><b>ë¹„ ì—°ê²° ì§€í–¥ì </b></span>

  - <span style="color:red"><b>ë¹„ ì‹ ë¢°ì„±</b></span>

  - <span style="color:red"><b>ì¢…ë‹¨ê°„ ì—°ê²° ë³´ì¥</b></span>

  - IPì£¼ì†Œì— ë”°ë¼ ë„¤íŠ¸ì›Œí¬ê°„ ì „ì†¡ê²½ë¡œë¥¼ ì œì–´

  - í•„ìš”ì— ë”°ë¼ Fragment(ë‹¨í¸í™”) ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸°ë„ í•¨ 

    > Routerê°€ ì—°ê²°í•˜ê³  ìˆëŠ” MTUì°¨ì´ ë•Œë¬¸ì— ì§€ì› ë˜ëŠ” ê¸°ëŠ¥

    > PCì—ì„œëŠ” 4ê³„ì¸µì„ í†µê³¼í•˜ì§€ ëª»í•˜ê³  MTU í¬ê¸°ë¥¼ ì´ˆê³¼ í•  ë•Œë§Œ ìˆ˜í–‰ ë¨ â†’ ICMP

## ğŸ—‚ï¸<span style="color:blue"><b>IP Header</b></span>

- Header í¬ê¸° â†’ Optioní•„ë“œì˜ í¬ê¸°ì— ë”°ë¼ ê°€ë³€ì  â†’ ìµœì†Œ 20bytes ~ ìµœëŒ€ 60bytes

ã€€ã€€![í™”ë©´ ìº¡ì²˜ 2022-07-27 110427](../../assets/img/í™”ë©´ ìº¡ì²˜ 2022-07-27 110427.png)

- <b>0~4bytes Field</b>

  ![í™”ë©´ ìº¡ì²˜ 2022-07-27 110612](../../assets/img/í™”ë©´ ìº¡ì²˜ 2022-07-27 110612.png)

  - Version (4bits) 

    > IP ë²„ì „ ì •ë³´ 

    > IPv4 headerì˜ version í•„ë“œëŠ” í•­ìƒ 4ë¡œ ê³ ì •

    > IPv6ëŠ” ê°œë°œë˜ë©´ì„œ ë³„ë„ì˜ í”„ë¡œí† ì½œì„ ë°œí‘œ 

  - IHL (4bits) 

    > IP Header Length ì˜ ì•½ì–´ë¡œ ê°€ë³€ì ì¸ IP headerì˜ í¬ê¸°ë¥¼ ëª…ì‹œ

    > 4ê°œì˜ Bitë¡œ í‘œí˜„ë˜ê³  4bytesë‹¨ìœ„ë¡œ í‘œì‹œë¨(ìµœëŒ€ ê¸¸ì´ ê°’ 60bytes)
    
  - Different Service(1byte) 

    > ë°ì´í„°ì˜ ìš°ì„ ìˆœìœ„ë¥¼ í‘œì‹œ â†’ Routerì—ì„œ ìš°ì„ ìˆœìœ„ë¥¼ í™•ì¸í•˜ê³  Routingì„ ìˆ˜í–‰ í•¨

    > D â†’ ì§€ì—°, T â†’ ì²˜ë¦¬ìœ¨, R â†’ ì‹ ë¢°ì„±

  - Total Length (2bytes) 

    > IP Packetì˜ ì „ì²´ í¬ê¸°(IP Header + Payload)

    > IP Packetì˜ ìµœëŒ€ í¬ê¸°ëŠ” MTU ê°’ì„ ê°€ì§ 

    â€» MTU(Maximum Transmission Unit) : ìµœëŒ€ ì „ì†¡ ë‹¨ìœ„

- <b>5~8bytes Field(3ê³„ì¸µ Fragmentationê³¼ ê´€ë ¨ëœ Field)</b>

  ![í™”ë©´ ìº¡ì²˜ 2022-07-27 111833](../../assets/img/í™”ë©´ ìº¡ì²˜ 2022-07-27 111833.png)

  - Identification (2bytes) 

    > IP ê³„ì¸µì—ì„œ ë‹¨í¸í™”(Fragmentation) ê°€ ìˆ˜í–‰ ë˜ê¸° ì „ ì›ë³¸ ë°ì´í„°ì˜ ì‹ë³„ ê°’ 

    > í†µì‹ ì˜ ì‹œì‘ ë°ì´í„°ëŠ” Random Numberë¡œ í• ë‹¹ë˜ë©° ì—°ì†ëœ í†µì‹ ì˜ ë‹¤ìŒ ë°ì´í„°ëŠ” +1 ì¦ê°€í•œ ê°’ì„ í• ë‹¹ ë°›ìŒ 

  - IP Flags (3bits) 

    > ë‹¨í¸í™” ìœ ë¬´ë¥¼ ì²´í¬í•˜ê¸° ìœ„í•œ í•„ë“œ

    ï¼ X : ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” bit 

    ï¼ D(Donâ€™t Fragment) : ë‹¨í¸í™”ë¥¼ í•  ìˆ˜ ìˆëŠ” ê²½ìš° 0, í•  ìˆ˜ ì—†ëŠ” ê²½ìš° 1 ê°’ì„ ê°€ì§ 

    ï¼ M (More Fragment) : ë‹¨í¸í™” ëœ ë§ˆì§€ë§‰ ì¡°ê°ì´ë©´ 0 , ì¶”ê°€ë¡œ ì¡°ê°ì´ ìˆìœ¼ë©´ 1 ê°’ì„ ê°€ì§

  - Fragment Offset (13bits) 

    > ë‹¨í¸í™” ëœ ë°ì´í„°ì˜ ìˆœì„œë¥¼ ë‚˜íƒ€ë‚´ê¸° ìœ„í•œ í•„ë“œ

    > IP Headerë¥¼ ì œì™¸í•œ Payloadì˜ ì‹œì‘ í¬ê¸° ê°’ì„ ìˆœì„œ ë²ˆí˜¸ë¡œ ì‚¬ìš© í•¨

    > ì˜ˆ) Payloadì˜ í¬ê¸°ê°€ 2000ì¸ ê²½ìš° ìµœëŒ€ MTU í¬ê¸° 1500ì„ ë„˜ê²Œ ë¨ ï¼ IP í•„ìˆ˜ Header 20bytesë¥¼ ì œì™¸í•˜ê³  1480bytes , 520bytesë¡œ ë‚˜ëˆ„ì–´ì„œ ë°ì´í„° ì „ì†¡

- <b>9~12bytes Field</b>

  ![í™”ë©´ ìº¡ì²˜ 2022-07-27 112559](../../assets/img/í™”ë©´ ìº¡ì²˜ 2022-07-27 112559.png)

  - Time to Live (1byte)

    > Network í™˜ê²½ì—ì„œ Packetì´ ìƒì¡´í•  ìˆ˜ ìˆëŠ” ì‹œê°„(í†µê³¼í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ Router ìˆ˜)

    > Routerê°€ ë°ì´í„°ë¥¼ ë‚´ë³´ë‚¼ ë•Œ TTL ê°’ì´ 1ì”© ê°ì†Œë¨

    > TTL ê°’ 0ì´ ë˜ëŠ” ì¥ë¹„ì—ì„œ Packet íê¸°

    > ì´ˆê¸° Default TTLê°’ì€ ìš´ì˜ì²´ì œ ì¢…ë¥˜ì— ë”°ë¼ ë‹¬ë¼ì§(ìœˆë„ìš°:128, Linux/Unix:64 , ê¸°íƒ€:255 ë“±..)

    > Network Looping í˜„ìƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©Protocol (1byte) 

    <span style="color:red"><b>*TTLì—ì„œì˜ Timeì€ ì‹œê°„ì´ ì•„ë‹ˆê³  íšŸìˆ˜ì˜ ì˜ë¯¸ë¡œ í˜¼ë™í•˜ì§€ ë§ì</b></span>

  - Payloadì— í¬í•¨ëœ í”„ë¡œí† ì½œ 

    > ìƒìœ„ê³„ì¸µ í”„ë¡œí† ì½œì˜ ì¢…ë¥˜ â†’ ICMP, UDP, TCP â€¦ 

  - Header Checksum (2bytes) 

    > IP Headerì˜ ì˜¤ë¥˜ë‚˜ ë³€ì¡°ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ ê°’

    > Headerë¥¼ word ë‹¨ìœ„(2bytes)ë¡œ checksum

- <b>Variable Field</b>

  ![í™”ë©´ ìº¡ì²˜ 2022-07-27 113735](../../assets/img/í™”ë©´ ìº¡ì²˜ 2022-07-27 113735.png)

  - Options (0~40bytes)

    > IP packetì„ ì œì–´ ë° ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì¶”ê°€ ì •ë³´ 

    ï¼ Source Routing â†’ ì¶œë°œì§€ ê²½ë¡œ ì§€ì • 

    ï¼ Traceroute â†’ íŒ¨í‚· ì „ì†¡ ê²½ë¡œ í™•ì¸ 

    ï¼ Security â†’ IP packetì˜ ë³´ì•ˆ ë“±ê¸‰ ì§€ì •

    

    > Network Testing ì´ë‚˜ Debuggingì— ì‚¬ìš©

    > Option í•„ë“œê°€ ì‚¬ìš©ëœ ê²½ìš° IP Headerì˜ ì „ì²´ í¬ê¸°ê°€ 32bits ë‹¨ìœ„	ê°€ ë˜ì§€ ì•Šìœ¼ë©´ íê¸° ë¨ 

â€‹				ï¼ Padding â†’ ì“°ë ˆê¸° ê°’ìœ¼ë¡œ 32bits ë‹¨ìœ„ë¥¼ ë§ì¶° ì¤Œ

<br>

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}
